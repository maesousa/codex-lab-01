<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Finanças Pessoais</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
<div class="app">

  <header class="header">
    <div>
      <h1>Finanças Pessoais</h1>
      <p class="subtitle">Dashboard mensal com análise e exportação.</p>
    </div>

    <div class="header-actions">
      <button id="btnExportCsv" class="btn btn-secondary" type="button">Exportar CSV</button>
      <button id="btnBackupJson" class="btn btn-secondary" type="button">Backup JSON</button>

      <label class="btn btn-secondary file-btn">
        Restaurar JSON
        <input id="fileRestore" type="file" accept="application/json" hidden />
      </label>

      <button id="btnLimparTudo" class="btn btn-secondary" type="button">Limpar tudo</button>
    </div>
  </header>

  <main class="grid">

    <section class="card">
      <h2>Novo registo</h2>

      <form id="form" class="form">
        <div class="row2">
          <label class="field">
            <span>Tipo</span>
            <select id="type">
              <option value="expense">Despesa</option>
              <option value="income">Receita</option>
            </select>
          </label>

          <label class="field">
            <span>Data</span>
            <input id="date" type="date" required />
          </label>
        </div>

        <label class="field">
          <span>Categoria</span>
          <select id="category"></select>
        </label>

        <label class="field">
          <span>Descrição</span>
          <input id="description" type="text" required />
        </label>

        <label class="field">
          <span>Valor (€)</span>
          <input id="amount" type="text" required />
        </label>

        <button class="btn btn-primary" type="submit">Adicionar</button>
        <p id="message" class="message"></p>
      </form>
    </section>

    <section class="card">

      <div class="card-header">
        <h2>Dashboard do mês</h2>

        <div class="filters">
          <label class="field compact">
            <span>Mês</span>
            <input id="month" type="month" />
          </label>

          <label class="field compact">
            <span>Tipo</span>
            <select id="typeFilter">
              <option value="all">Todos</option>
              <option value="expense">Despesas</option>
              <option value="income">Receitas</option>
            </select>
          </label>
        </div>
      </div>

      <div class="summary">
        <div class="kpi">
          <div class="kpi-label">Despesas</div>
          <div id="kpiExpenses" class="kpi-value">0,00 €</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Receitas</div>
          <div id="kpiIncome" class="kpi-value">0,00 €</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Saldo</div>
          <div id="kpiBalance" class="kpi-value">0,00 €</div>
        </div>
      </div>

      <div class="charts">
        <div class="chartbox">
          <div class="chart-title">Despesas por categoria</div>
          <canvas id="chartExpenseCategories"></canvas>
        </div>

        <div class="chartbox">
          <div class="chart-title">Tendência últimos 6 meses</div>
          <canvas id="chartTrend"></canvas>
        </div>
      </div>

      <div class="tops">
        <div class="topbox">
          <div class="top-title">Top 5 despesas</div>
          <ol id="topExpensesItems" class="toplist"></ol>
        </div>

        <div class="topbox">
          <div class="top-title">Top 5 receitas</div>
          <ol id="topIncomeItems" class="toplist"></ol>
        </div>
      </div>

      <ul id="list" class="list"></ul>

    </section>

  </main>

  <footer class="footer">
    <span class="muted">Dados guardados localmente (localStorage).</span>
  </footer>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="storage.js"></script>
<script src="domain.js"></script>
<script src="ui.js"></script>
<script src="main.js"></script>

</body>
</html>
